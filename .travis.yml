sudo: required

language: rust

matrix:
  include:
  - rust: stable

before_script:
  - |
      export PATH=$HOME/.local/bin:$PATH
      cargo install cargo-update || echo "cargo-update already installed" &&
      cargo install cargo-travis || echo "cargo-travis already installed" &&
      cargo install-update -a

script:
  - |
      # [no_std]
      cargo build --no-default-features --features modbus,rtu &&
      cargo test --no-default-features --features modbus,rtu
  - |
      # [std]
      cargo build --all &&
      cargo test --all

after_success:
  - cargo coveralls || true
